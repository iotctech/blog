---
title: 二叉堆详解
date: 2020-07-23 10:12:46
tags:
 - 数据结构
 - 二叉堆
 - 算法
 - LeetCode
 - 二叉树
categories:
 - [linux]
---

### 1、什么是二叉堆
二叉堆本质是一种完全二叉树，分为**最大堆**和**最小堆**。

最大堆是指任何一个父节点的值都大于等于它孩子节点的值；最小堆是指任何父节点的值都小于等于他左右孩子节点的值。

![](1.png)

二叉堆的根节点叫做堆顶。最大堆和最小堆的特点，决定了在最大堆的堆顶是整个堆中的最大元素；最小堆的堆顶是整个堆中的最小元素。

二叉堆通常用数组来表示。如果根节点在数组中的位置是1，第n个位置的子节点分别在2n和 2n+1。因此，第1个位置的子节点在2和3，第2个位置的子节点在4和5。以此类推。这种基于1的数组存储方式便于寻找父节点和子节点。

对于一个很大的堆，这种存储是低效的。因为节点的子节点很可能在另外一个内存页中。B-heap是一种效率更高的存储方式，把每个子树放到同一内存页。

如果用指针链表存储堆，那么需要能访问叶节点的方法。可以对二叉树“穿线”(threading)方式，来依序遍历这些节点。

二叉堆的主要操作有sink （下沉）和 swim （上浮），⽤以维护⼆叉堆的性质。

二叉堆的主要应⽤，⾸先是⼀种排序⽅法**堆排序**，第⼆是⼀种很有⽤的数据结构**优先级队列**。

### 2、二叉堆的索引
因为，⼆叉堆其实就是⼀种特殊的⼆叉树（完全⼆叉树），只不过存储在数组⾥。⼀般的链表⼆叉树，我们操作节点的指针，⽽在数组⾥，我们把数组索引作为指针：

```
// ⽗节点的索引
int parent(int root) 
{
    return root / 2;
}

// 左孩⼦的索引
int left(int root) 
{
    return root * 2;
}

// 右孩⼦的索引
int right(int root) 
{
    return root * 2 + 1;
}
```

画个图就能理解了，注意数组的第⼀个索引 0 空着不⽤

![](2.png)

把 arr[1] 作为整棵树的根的话，每个节点的⽗节点和左右孩⼦的索引都可以通过简单的运算得到，这就是⼆叉堆设计的⼀个巧妙之处。

另外，对于⼀个最⼤堆，根据其性质，显然堆顶，也就是 arr[1] ⼀定是所有元素中最⼤的元素。

### 3、优先级队列


### 4、swim和sink实现


### 5、delMax和insert实现